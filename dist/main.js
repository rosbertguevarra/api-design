!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=6)}([function(e,t){e.exports=require("express")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("mongoose")},function(e,t,o){const n=o(2),r=new n.Schema({userName:String,firstName:String,lastName:String,email:{type:String,unique:!0},password:String});e.exports=User=n.model("User",r)},function(e,t,o){const n=o(2),r=new n.Schema({title:String,date:{type:Date,default:Date.now()},author:String,body:String});e.exports=Blog=n.model("Book",r)},function(e,t){e.exports=require("bcrypt")},function(e,t,o){const n=o(7),r=o(8),s=o(9),a=o(10),i=o(0)(),u=o(11),c=o(12),d=o(13),l=o(2);i.disable("x-powered-by");const p=l.connection;l.connect("mongodb://localhost/users_test",{useNewUrlParser:!0}),i.use(d()),i.use(u.json()),i.use(u.urlencoded({extended:!0})),i.use(c("dev")),i.use("/api",n),i.use("/api/data",a),i.use("/api/data/:id",a),i.use("/api/data/",s),i.use("/api/data/signup",r),p.on("error",console.error.bind(console,"connection error:")),p.once("open",function(){console.log("connected to the database")}),i.listen(3e3,()=>{console.log("server is on 3000")})},function(e,t,o){const n=o(0).Router(),r=o(4);o(3),o(1),o(5);n.get("/data",async(e,t)=>{const o=await r.find({});t.status(200).json(o)}),e.exports=n},function(e,t,o){const n=o(0).Router(),r=o(3),s=(o(1),o(5));n.post("/signup",async(e,t)=>{let o={userName:e.body.userName,firstName:e.body.firstName,lastName:e.body.lastName,email:e.body.email,password:s.hashSync(e.body.password,10)};r.create(o,e=>{if(e)throw e;t.status(200).json(o)})}),e.exports=n},function(e,t,o){const n=o(0).Router(),r=(o(3),o(1));n.post("/login",(e,t)=>{const o={userName:e.body.userName,password:e.body.password};r.sign({user:o},"secretKey",(e,o)=>{t.json({token:o})})}),e.exports=n},function(e,t,o){const n=o(0).Router(),r=o(4),s=o(1);n.put("/data/:id",async(e,t)=>{const o=await r.findById({_id:e.params.id},err);if(err)throw err;t.status(200).json(o)}),n.post("/data",(e,t)=>{s.verify(e.token,"secretkey",(o,n)=>{if(o)t.status(403);else{let o={title:e.body.title,author:e.body.author,body:e.body.body,date:e.body.date};r.create(o,e=>{e?console.log(e):t.status(200).json({newData:o,authData:n})})}})}),n.delete("/data/:id",async(e,t)=>{const o=await r.findByIdAndRemove({_id:e.params.id});t.send(o)}),e.exports=n},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("morgan")},function(e,t){e.exports=require("cors")}]);